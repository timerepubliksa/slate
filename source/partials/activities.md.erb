# Attività utente

L'endpoint permette di consultare la lista delle attività di un utente da mostrare nel profilo.  

## Lista Attività utente loggato

> Esempio

```shell```
curl https://timerepublik.com/api/v1/me/activities.json /
  -H "Authorization: Bearer 4256dde1cce5957d2d6be4b4f4dcee1656ec2990522eab52a8491e2130f29ea7"
```

> Risposta

```json```
[
  {
    "id": 7,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "new_award",
    "other_user": null,
    "request": null,
    "deal": null,
    "attachment": null,
    "parameters": {
      "award": "bronze_rated"
    },
    "created_at": "2015-07-09T09:28:31.000Z"
  },
  {
    "id": 6,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "new_request",
    "other_user": null,
    "request": null,
    "deal": null,
    "attachment": null,
    "parameters": null,
    "created_at": "2015-07-09T08:09:43.000Z"
  },
  {
    "id": 5,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "new_request",
    "other_user": null,
    "request": {
      "id": 1072902425,
      "slug": "andrea-zaupa-chiede-un-servizio-di-computer-helper-e9c7d5dc74b45233227403ccd82d6d6c",
      "title": "Andrea Zaupa chiede un servizio di: Computer Helper",
      "message": "test requests",
      "satisfied": false,
      "old": false,
      "archived": false,
      "locale": "fr",
      "conversations_count": 0,
      "user_id": 1010,
      "talent_id": 1,
      "created_at": "2015-07-09T08:02:06.000Z"
    },
    "deal": null,
    "attachment": null,
    "parameters": null,
    "created_at": "2015-07-09T08:02:06.000Z"
  },
  {
    "id": 4,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "add_talent",
    "other_user": null,
    "request": null,
    "deal": null,
    "attachment": null,
    "parameters": null,
    "created_at": "2015-07-08T13:36:35.000Z"
  },
  {
    "id": 3,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "add_talent",
    "other_user": null,
    "request": null,
    "deal": null,
    "attachment": null,
    "parameters": null,
    "created_at": "2015-07-08T13:36:07.000Z"
  },
  {
    "id": 2,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "new_request",
    "other_user": null,
    "request": {
      "id": 1072902424,
      "slug": "andrea-zaupa-chiede-un-servizio-di-computer-helper-a1ab5d93b55fb486b13102e0f9400bc8",
      "title": "Andrea Zaupa chiede un servizio di: Computer Helper",
      "message": "hhhhhh",
      "satisfied": false,
      "old": false,
      "archived": false,
      "locale": "en",
      "conversations_count": 0,
      "user_id": 1010,
      "talent_id": 1,
      "created_at": "2015-07-08T12:26:46.000Z"
    },
    "deal": null,
    "attachment": null,
    "parameters": null,
    "created_at": "2015-07-08T12:26:47.000Z"
  },
  {
    "id": 1,
    "user": {
      "id": 1010,
      "email": "'test@test.com'",
      "username": "andreazaupa",
      "first_name": "Andrea",
      "last_name": "Zaupa",
      "trustmeter": 1
    },
    "key": "update_avatar",
    "other_user": null,
    "request": null,
    "deal": null,
    "attachment": null,
    "parameters": null,
    "created_at": "2015-07-03T13:11:09.000Z"
  }
]
```

Endpoint: 

`GET: https://timerepublik.com/api/v1/me/activities.json`

Le Attività rappresentano lo storico delle azioni di un utente e sono generalmente mostrate nella dashboard utente. 

### Paginazione e filtri

Utilizzando i seguenti parametri è possibile cambiare i valori paginazione e filtro dei risultati ritornati

Parameter | Type | Description
--------- | ------- | -----------
page|integer|la pagina richiesta
per_page|integer|il numero di risultati per pagina
filter|string| Filtra per una specifica key di attività


## Dettaglio di un Activity


```shell```
curl https://timerepublik.com/api/v1/me/activities/1.json /
  -H "Authorization: Bearer 4256dde1cce5957d2d6be4b4f4dcee1656ec2990522eab52a8491e2130f29ea7"
```

> Risposta

```json```
{
  "id": 7,
  "user": {
    "id": 1010,
    "email": "'test@test.com'",
    "username": "andreazaupa",
    "first_name": "Andrea",
    "last_name": "Zaupa",
    "trustmeter": 1
  },
  "key": "new_award",
  "other_user": null,
  "request": null,
  "deal": null,
  "attachment": null,
  "parameters": {
    "award": "bronze_rated"
  },
  "created_at": "2015-07-09T09:28:31.000Z"
}
```

Endpoint: 
`GET: https://timerepublik.com/api/v1/me/activities/:ID_ACTIVITY.json`

### Attributi 

Parameter | Type | Description
--------- | ------- | -----------
id|integer|ID univoco dell'activity
user_id|integer| Id Utente 
other_user_id|integer| Se presente, l'altro utente coinvolto nell'attività
request_id|integer| Se presente la richiesta legata all'attività
deal_id|integer| Se presente, il Deal collegato all'attività
attachment|json| Allegato opzionale all'attività
parameters|json| Informazioni aggiuntive legate all'attività
key|string| Identificativo della tipologia di attività
created_at|integer| Data in cui si è registrata l'attività



## Lista Attività per la timeline

Permette di ottenere una lista di attività pre-selezionate per essere mostrate nella timeline utente. 
La riposta si compone di attività dell'utente loggato e attività degli utenti a lui collegati. 


> Esempio

```shell```
curl https://timerepublik.com/api/v1/me/timeline_activities.json /
  -H "Authorization: Bearer 4256dde1cce5957d2d6be4b4f4dcee1656ec2990522eab52a8491e2130f29ea7"
```

> Risposta

```json```
{
  "activities": [
    {
      "id": 7,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_award",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": {
        "award": "bronze_rated"
      }
    },
    {
      "id": 6,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_request",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 5,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_request",
      "other_user": null,
      "request": {
        "id": 1072902425,
        "slug": "andrea-zaupa-chiede-un-servizio-di-computer-helper-e9c7d5dc74b45233227403ccd82d6d6c",
        "title": "Andrea Zaupa chiede un servizio di: Computer Helper",
        "message": "test requests",
        "satisfied": false,
        "old": false,
        "archived": false,
        "locale": "fr",
        "conversations_count": 0,
        "user_id": 1010,
        "talent_id": 1,
        "created_at": "2015-07-09T08:02:06.000Z"
      },
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 4,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "add_talent",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 3,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "add_talent",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 2,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_request",
      "other_user": null,
      "request": {
        "id": 1072902424,
        "slug": "andrea-zaupa-chiede-un-servizio-di-computer-helper-a1ab5d93b55fb486b13102e0f9400bc8",
        "title": "Andrea Zaupa chiede un servizio di: Computer Helper",
        "message": "hhhhhh",
        "satisfied": false,
        "old": false,
        "archived": false,
        "locale": "en",
        "conversations_count": 0,
        "user_id": 1010,
        "talent_id": 1,
        "created_at": "2015-07-08T12:26:46.000Z"
      },
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 1,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "update_avatar",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    }
  ],
  "favorite_activities": [
    {
      "id": 7,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_award",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": {
        "award": "bronze_rated"
      }
    },
    {
      "id": 6,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_request",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 5,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_request",
      "other_user": null,
      "request": {
        "id": 1072902425,
        "slug": "andrea-zaupa-chiede-un-servizio-di-computer-helper-e9c7d5dc74b45233227403ccd82d6d6c",
        "title": "Andrea Zaupa chiede un servizio di: Computer Helper",
        "message": "test requests",
        "satisfied": false,
        "old": false,
        "archived": false,
        "locale": "fr",
        "conversations_count": 0,
        "user_id": 1010,
        "talent_id": 1,
        "created_at": "2015-07-09T08:02:06.000Z"
      },
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 4,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "add_talent",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 3,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "add_talent",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 2,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "new_request",
      "other_user": null,
      "request": {
        "id": 1072902424,
        "slug": "andrea-zaupa-chiede-un-servizio-di-computer-helper-a1ab5d93b55fb486b13102e0f9400bc8",
        "title": "Andrea Zaupa chiede un servizio di: Computer Helper",
        "message": "hhhhhh",
        "satisfied": false,
        "old": false,
        "archived": false,
        "locale": "en",
        "conversations_count": 0,
        "user_id": 1010,
        "talent_id": 1,
        "created_at": "2015-07-08T12:26:46.000Z"
      },
      "deal": null,
      "attachment": null,
      "parameters": null
    },
    {
      "id": 1,
      "user": {
        "id": 1010,
        "email": "'test@test.com'",
        "username": "andreazaupa",
        "first_name": "Andrea",
        "last_name": "Zaupa",
        "trustmeter": 1
      },
      "key": "update_avatar",
      "other_user": null,
      "request": null,
      "deal": null,
      "attachment": null,
      "parameters": null
    }
  ]
}
```

Endpoint: 

`GET: https://timerepublik.com/api/v1/me/timeline_activities.json`

Le Attività rappresentano lo storico delle azioni di un utente e sono generalmente mostrate nella dashboard utente. 

### Paginazione e filtri

Utilizzando i seguenti parametri è possibile cambiare i valori paginazione e filtro dei risultati ritornati

Parameter | Type | Description
--------- | ------- | -----------
page|integer|la pagina richiesta
per_page|integer| Il numero di risultati per pagina
filter|string| Filtra per una specifica key di attività
near_me|boolean| Include anche le attività degli utenti geograficamente vicini all'utente selezionato


## Dettaglio di un Activity


```shell```
curl https://timerepublik.com/api/v1/me/activities/1.json /
  -H "Authorization: Bearer 4256dde1cce5957d2d6be4b4f4dcee1656ec2990522eab52a8491e2130f29ea7"
```

> Risposta

```json```
{
  "id": 7,
  "user": {
    "id": 1010,
    "email": "'test@test.com'",
    "username": "andreazaupa",
    "first_name": "Andrea",
    "last_name": "Zaupa",
    "trustmeter": 1
  },
  "key": "new_award",
  "other_user": null,
  "request": null,
  "deal": null,
  "attachment": null,
  "parameters": {
    "award": "bronze_rated"
  },
  "created_at": "2015-07-09T09:28:31.000Z"
}
```

Endpoint: 
`GET: https://timerepublik.com/api/v1/me/activities/:ID_ACTIVITY.json`

### Attributi 

Parameter | Type | Description
--------- | ------- | -----------
id|integer|ID univoco dell'activity
user_id|integer| Id Utente 
other_user_id|integer| Se presente, l'altro utente coinvolto nell'attività
request_id|integer| Se presente la richiesta legata all'attività
deal_id|integer| Se presente, il Deal collegato all'attività
attachment|json| Allegato opzionale all'attività
parameters|json| Informazioni aggiuntive legate all'attività
key|string| Identificativo della tipologia di attività
created_at|integer| Data in cui si è registrata l'attività

## Nascondere un attività dalla timeline

> Esempio 

```shell```
curl -H "Authorization: Bearer 3c11bb8c4c78180bba0f3c86984ff2e6b8a6c3cbdf5e1c125a26e196d19e115b" -X POST https://timrepublik.com/api/v1/me/activities/7/hide
```

```json```
{
  "id": 7,
  "user": {
    "id": 1010,
    "email": "'test@test.com'",
    "username": "andreazaupa",
    "first_name": "Andrea",
    "last_name": "Zaupa",
    "trustmeter": 1
  },
  "key": "new_award",
  "other_user": null,
  "request": null,
  "deal": null,
  "attachment": null,
  "parameters": {
    "award": "bronze_rated"
  },
  "created_at": "2015-07-09T09:28:31.000Z"
}
```

Se l'utente desidera non vedere una certa attività nella sua timeline questa puo' essere nascosta

Endpoint: 
`POST: https://timerepublik.com/api/v1/me/activities/:ID_ACTIVITY/hide`

Gli Endpoint descritti in precedenza non mostrano le attività nascoste. 


